# Project9: AES / SM4 software implementation   
## 一、实验原理
AES作为分组密码算法，分组长度为128bits，不同的密钥长度可满足不同的安全需求，根据常见密钥长度将其命名为“AES-128”、“AES-192”与“AES-256”。<br>

基本的算法构成包括加密算法、解密算法、密钥扩展算法。<br>

### 加密方案
AES 加密算法共涉及 4 种操作：S盒（SubBytes）、行移位（ShiftRows）、列混合 （MixColumns）和轮密钥加（AddRoundKey）。<br>

以下以 AES-128 为例介绍AES的加密过程。<br>

首先对明文与原始密钥进行依次异或操作，从而避免不用密钥即可完成逆过程的可能，保证算法的安全性。<br>
然后进行10轮迭代加密，每一轮包括以下四个操作：字节代换，行移位，列混合，轮密钥加。注意最后一轮迭代不执行列混合操作。<br>
![AES加密](https://github.com/hsgroup30num1/homework-group-30/assets/129477640/21c4271a-ea36-43bf-8c85-14d138714c47)

### 解密方案
AES 解密算法的每一步分别对应加密算法的逆操作。加解密所有操作的顺序正好是相反的，每轮的密钥分别由种子密钥经过密钥扩展算法得到。<br>

首先对密文进行一次轮密钥加操作。<br>
然后进行10轮迭代加密，每一轮顺序执行以下四个操作：逆行移位，逆字节代换，逆轮密钥加，逆列混合。注意最后一轮迭代不执行逆列混合操作。<br>

### 密钥扩展方案
密钥扩展的复杂性是确保算法安全性的重要部分。AES-128的分组长度和密钥长度均为128bits时，加密算法共迭代10轮，需要10个子密钥。
为保证算法的安全性，在算法的首位均需要使用轮密钥加，从而避免不用密钥即可完成逆过程的可能，因此AES的密钥扩展需将128bits的密钥扩展为11个轮密钥，即44个32bits密钥字。<br>

AES首先将初始密钥写到4*4矩阵中，每一列为一个32bits字，依次记为W_0，W_1，W_2，W_3。然后对W数组进行扩充得到44列即44个32bits字。<br>

扩充算法如下：<br>

对每个轮密钥的第一列W_i,由如下等式确定：W_i=W_{i-4}\bigoplusT（Wi-1），其中T函数由以下3部分构成：循环移位、字节代换、异或轮常量。W_{i-1}循环移位一个字节后经过S盒进行字节代换，得到的结果异或轮常数。<br>
对每个轮密钥除第一列外的其余三列W_i,由如下等式确定：W_i=W_{i-4}\bigoplus W_{i-1}.<bR>
![AES密钥扩展](https://github.com/hsgroup30num1/homework-group-30/assets/129477640/5e946149-6774-4f34-9a13-11b21f802b4e)

## 二、运行指导
实验代码共包括“AES.h”、“AES.cpp”、“main.cpp”三部分，直接运行main.cpp即可。
## 三、运行结果
![AES](https://github.com/hsgroup30num1/homework-group-30/assets/129477640/c3f3669c-8b46-4113-a12d-64908a582034)
